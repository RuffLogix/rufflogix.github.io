---
import type { ExperienceInformation } from "../types/timeline.d.ts";
const { exp } = Astro.props as { exp: ExperienceInformation };
import { Image } from "astro:assets";
---

<div class="relative flex items-start">
  <div
    class="timeline-dot absolute left-2 sm:left-4 w-4 h-4 bg-emerald-600 rounded-full border-4 border-gray-900 z-10"
  >
  </div>
  <div class="ml-12 sm:ml-20 w-full">
    <div
      class="timeline-card bg-gray-800 border border-gray-700 rounded-lg p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow"
    >
      <div class="mb-4">
        <div
          class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 mb-4"
        >
          <div class="flex items-start gap-4 flex-1 min-w-0">
            {
              exp.image && (
                <a href={exp.link} target="_blank" rel="noopener noreferrer">
                  <Image
                    src={exp.image}
                    alt={`${exp.instituteName} logo`}
                    width={64}
                    height={64}
                    class="w-12 h-12 sm:w-16 sm:h-16 rounded-lg object-cover flex-shrink-0 border-2 border-gray-600"
                  />
                </a>
              )
            }
            <div class="min-w-0 flex-1">
              <h3 class="text-xl sm:text-2xl font-bold text-white mb-2">
                {exp.instituteName}
              </h3>
              <p class="text-emerald-400 font-semibold mb-1">
                {exp.program}
              </p>
              <p class="text-gray-400 text-sm">{exp.location}</p>
            </div>
          </div>
          <div class="flex-shrink-0 self-start">
            <div class="text-right">
              <span
                class="inline-block bg-emerald-600 text-white px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap"
              >
                {exp.duration}
              </span>
              {
                exp.calculatedDuration && (
                  <div class="text-emerald-400 text-xs mt-1 font-medium">
                    ({exp.calculatedDuration})
                  </div>
                )
              }
            </div>
          </div>
        </div>
      </div>
      <p class="text-gray-300 leading-relaxed">
        {exp.description}
      </p>
    </div>
  </div>
</div>
